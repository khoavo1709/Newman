"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.extractMeta = void 0;
const allure_js_commons_1 = require("allure-js-commons");
const extractMeta = (eventList) => {
    const labels = [];
    eventList.each((event) => {
        if (event.listen === "test" && event.script.exec) {
            event.script.exec.forEach((line) => {
                var _a;
                const isCommentLine = line.trim().startsWith("//");
                if (!isCommentLine) {
                    return;
                }
                const trimmedCommentValue = line.trim().replace("//", "").trim();
                const idMatch = trimmedCommentValue.match(allure_js_commons_1.allureIdRegexp);
                const idValue = (_a = idMatch === null || idMatch === void 0 ? void 0 : idMatch.groups) === null || _a === void 0 ? void 0 : _a.id;
                if (idValue) {
                    labels.push({ name: allure_js_commons_1.LabelName.ALLURE_ID, value: idValue });
                }
                const labelMatch = trimmedCommentValue.match(allure_js_commons_1.allureLabelRegexp);
                const { name, value } = (labelMatch === null || labelMatch === void 0 ? void 0 : labelMatch.groups) || {};
                if (name && value) {
                    labels.push({ name, value });
                }
            });
        }
    });
    return { labels };
};
exports.extractMeta = extractMeta;
//# sourceMappingURL=helpers.js.map